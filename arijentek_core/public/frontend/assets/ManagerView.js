var A=(z,x,v)=>new Promise((g,y)=>{var n=f=>{try{d(v.next(f))}catch(_){y(_)}},i=f=>{try{d(v.throw(f))}catch(_){y(_)}},d=f=>f.done?g(f.value):Promise.resolve(f.value).then(n,i);d((v=v.apply(z,x)).next())});import{m as T,e as D}from"./api.js";import{C as R}from"./circle-alert.js";import{C as k}from"./circle-check-big.js";import{B as q}from"./briefcase.js";import{C as E}from"./clock.js";import{c as B,d as V,m as F,a as l,b as t,q as $,k as u,i as h,g as c,h as m,t as r,F as w,n as j,r as b,o as a}from"./main.js";import{R as M}from"./receipt.js";/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=B("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),P={class:"flex gap-4 mb-6 border-b border-white/5"},S={key:0,class:"absolute bottom-0 left-0 w-full h-0.5 bg-teal-500 rounded-full"},Y={key:0,class:"absolute bottom-0 left-0 w-full h-0.5 bg-teal-500 rounded-full"},X={key:0,class:"mb-4 p-3 bg-red-500/10 border border-red-500/20 text-red-400 rounded-lg text-sm flex items-center gap-2"},G={key:1,class:"mb-4 p-3 bg-green-500/10 border border-green-500/20 text-green-400 rounded-lg text-sm flex items-center gap-2"},H={key:2,class:"space-y-4"},J={key:3},K={key:0,class:"glass-card p-12 flex flex-col items-center justify-center text-center"},O={class:"w-16 h-16 rounded-full bg-slate-800/50 flex items-center justify-center mb-4"},Q={key:1,class:"grid gap-4"},U={class:"flex flex-col md:flex-row md:items-start justify-between gap-4"},W={class:"flex-1"},Z={class:"flex items-center gap-3 mb-2"},I={class:"w-10 h-10 rounded-full bg-indigo-500/20 text-indigo-400 flex items-center justify-center font-bold text-lg"},ee={class:"text-lg font-medium text-white"},te={class:"flex items-center gap-2 text-xs text-slate-500"},se={class:"mt-4 pl-13 md:pl-0 grid grid-cols-2 sm:grid-cols-4 gap-4"},le={class:"bg-white/5 p-3 rounded-lg text-center"},ae={class:"text-sm font-medium text-slate-200"},oe={class:"bg-white/5 p-3 rounded-lg text-center"},ne={class:"text-sm font-medium text-slate-200"},re={class:"bg-white/5 p-3 rounded-lg text-center"},ie={class:"text-sm font-medium text-amber-400"},de={key:0,class:"mt-4 p-3 bg-slate-900/30 rounded-lg border border-white/5"},ue={class:"text-sm text-slate-400 italic"},ce={class:"flex md:flex-col gap-2 min-w-[120px]"},me=["onClick","disabled"],xe={key:0,class:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"},ve=["onClick","disabled"],fe={key:4},ge={key:0,class:"glass-card p-12 flex flex-col items-center justify-center text-center"},pe={class:"w-16 h-16 rounded-full bg-slate-800/50 flex items-center justify-center mb-4"},be={key:1,class:"grid gap-4"},ye={class:"flex flex-col md:flex-row md:items-start justify-between gap-4"},_e={class:"flex-1"},he={class:"flex items-center gap-3 mb-2"},ke={class:"w-10 h-10 rounded-full bg-pink-500/20 text-pink-400 flex items-center justify-center font-bold text-lg"},we={class:"text-lg font-medium text-white"},Ce={class:"flex items-center gap-2 text-xs text-slate-500"},Ae={class:"mt-4 pl-13 md:pl-0"},je={class:"text-2xl font-bold text-white mb-1"},ze={class:"flex md:flex-col gap-2 min-w-[120px]"},Le=["onClick","disabled"],Te={key:0,class:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"},De=["onClick","disabled"],Me=V({__name:"ManagerView",setup(z){const x=b("leave"),v=b([]),g=b([]),y=b(!0),n=b(null),i=b(""),d=b("");function f(){return A(this,null,function*(){y.value=!0;try{const[o,e]=yield Promise.all([T.getTeamLeaves(),D.getTeamExpenses()]);v.value=Array.isArray(o)?o:[],g.value=Array.isArray(e)?e:[]}catch(o){console.error(o),i.value="Failed to load data"}finally{y.value=!1}})}function _(o,e){return A(this,null,function*(){if(!n.value){n.value=o,i.value="",d.value="";try{const s=yield T.processLeave(o,e);s.status==="success"||s.success?(d.value=`Leave ${e} successfully`,v.value=v.value.filter(p=>p.name!==o)):i.value=s.error||"Action failed"}catch(s){i.value=s.message||"Error processing request"}finally{n.value=null,setTimeout(()=>{d.value="",i.value=""},3e3)}}})}function L(o,e){return A(this,null,function*(){if(!n.value){n.value=o,i.value="",d.value="";try{const s=yield D.process(o,e);s.status==="success"||s.success?(d.value=`Expense ${e}d successfully`,g.value=g.value.filter(p=>p.name!==o)):i.value=s.error||"Action failed"}catch(s){i.value=s.message||"Error processing request"}finally{n.value=null,setTimeout(()=>{d.value="",i.value=""},3e3)}}})}function C(o){return new Date(o).toLocaleDateString()}return F(()=>{f()}),(o,e)=>(a(),l("div",null,[e[20]||(e[20]=t("div",{class:"mb-8 animate-fade-in"},[t("h1",{class:"text-2xl sm:text-3xl font-bold text-white"},"Team Approvals"),t("p",{class:"text-sm text-slate-500 mt-1"},"Manage requests from your team")],-1)),t("div",P,[t("button",{onClick:e[0]||(e[0]=s=>x.value="leave"),class:$(["pb-2 text-sm font-medium transition-colors relative",x.value==="leave"?"text-teal-400":"text-slate-500 hover:text-slate-300"])},[e[2]||(e[2]=u(" Leave Requests ",-1)),x.value==="leave"?(a(),l("span",S)):h("",!0)],2),t("button",{onClick:e[1]||(e[1]=s=>x.value="expense"),class:$(["pb-2 text-sm font-medium transition-colors relative",x.value==="expense"?"text-teal-400":"text-slate-500 hover:text-slate-300"])},[e[3]||(e[3]=u(" Expense Claims ",-1)),x.value==="expense"?(a(),l("span",Y)):h("",!0)],2)]),i.value?(a(),l("div",X,[c(m(R),{size:16}),u(" "+r(i.value),1)])):h("",!0),d.value?(a(),l("div",G,[c(m(k),{size:16}),u(" "+r(d.value),1)])):h("",!0),y.value?(a(),l("div",H,[(a(),l(w,null,j(3,s=>t("div",{key:s,class:"glass-card p-6 animate-pulse"},[...e[4]||(e[4]=[t("div",{class:"h-4 bg-white/10 w-1/3 mb-2 rounded"},null,-1),t("div",{class:"h-4 bg-white/5 w-1/2 rounded"},null,-1)])])),64))])):x.value==="leave"?(a(),l("div",J,[v.value.length===0?(a(),l("div",K,[t("div",O,[c(m(k),{class:"text-emerald-400",size:32})]),e[5]||(e[5]=t("h3",{class:"text-lg font-medium text-white mb-1"},"No pending leaves",-1)),e[6]||(e[6]=t("p",{class:"text-slate-500"},"You're all caught up!",-1))])):(a(),l("div",Q,[(a(!0),l(w,null,j(v.value,s=>(a(),l("div",{key:s.name,class:"glass-card p-6 animate-slide-up group"},[t("div",U,[t("div",W,[t("div",Z,[t("div",I,r(s.employee_name.charAt(0)),1),t("div",null,[t("h3",ee,r(s.employee_name),1),t("div",te,[c(m(q),{size:12}),u(" "+r(s.leave_type)+" ",1),e[7]||(e[7]=t("span",{class:"w-1 h-1 bg-slate-600 rounded-full"},null,-1)),c(m(E),{size:12}),u(" Applied "+r(C(s.creation)),1)])])]),t("div",se,[t("div",le,[e[8]||(e[8]=t("p",{class:"text-xs text-slate-500 mb-1"},"From",-1)),t("p",ae,r(C(s.from_date)),1)]),t("div",oe,[e[9]||(e[9]=t("p",{class:"text-xs text-slate-500 mb-1"},"To",-1)),t("p",ne,r(C(s.to_date)),1)]),t("div",re,[e[10]||(e[10]=t("p",{class:"text-xs text-slate-500 mb-1"},"Days",-1)),t("p",ie,r(s.total_leave_days),1)])]),s.description?(a(),l("div",de,[t("p",ue,'"'+r(s.description)+'"',1)])):h("",!0)]),t("div",ce,[t("button",{onClick:p=>_(s.name,"Approved"),disabled:!!n.value,class:"flex-1 md:flex-none flex items-center justify-center gap-2 px-4 py-2 bg-emerald-500/10 text-emerald-400 border border-emerald-500/20 rounded-lg hover:bg-emerald-500/20 transition-colors disabled:opacity-50"},[n.value===s.name?(a(),l("span",xe)):(a(),l(w,{key:1},[c(m(k),{size:16}),e[11]||(e[11]=u(" Approve ",-1))],64))],8,me),t("button",{onClick:p=>_(s.name,"Rejected"),disabled:!!n.value,class:"flex-1 md:flex-none flex items-center justify-center gap-2 px-4 py-2 bg-red-500/10 text-red-400 border border-red-500/20 rounded-lg hover:bg-red-500/20 transition-colors disabled:opacity-50"},[c(m(N),{size:16}),e[12]||(e[12]=u(" Reject ",-1))],8,ve)])])]))),128))]))])):x.value==="expense"?(a(),l("div",fe,[g.value.length===0?(a(),l("div",ge,[t("div",pe,[c(m(k),{class:"text-emerald-400",size:32})]),e[13]||(e[13]=t("h3",{class:"text-lg font-medium text-white mb-1"},"No pending expenses",-1)),e[14]||(e[14]=t("p",{class:"text-slate-500"},"You're all caught up!",-1))])):(a(),l("div",be,[(a(!0),l(w,null,j(g.value,s=>(a(),l("div",{key:s.name,class:"glass-card p-6 animate-slide-up group"},[t("div",ye,[t("div",_e,[t("div",he,[t("div",ke,r(s.employee_name.charAt(0)),1),t("div",null,[t("h3",we,r(s.employee_name),1),t("div",Ce,[c(m(M),{size:12}),e[15]||(e[15]=u(" Expense Claim ",-1)),e[16]||(e[16]=t("span",{class:"w-1 h-1 bg-slate-600 rounded-full"},null,-1)),c(m(E),{size:12}),u(" "+r(C(s.posting_date)),1)])])]),t("div",Ae,[t("p",je,r(Number(s.total_claimed_amount).toLocaleString()),1),e[17]||(e[17]=t("p",{class:"text-xs text-slate-500"},"Total Claimed Amount",-1))])]),t("div",ze,[t("button",{onClick:p=>L(s.name,"Approve"),disabled:!!n.value,class:"flex-1 md:flex-none flex items-center justify-center gap-2 px-4 py-2 bg-emerald-500/10 text-emerald-400 border border-emerald-500/20 rounded-lg hover:bg-emerald-500/20 transition-colors disabled:opacity-50"},[n.value===s.name?(a(),l("span",Te)):(a(),l(w,{key:1},[c(m(k),{size:16}),e[18]||(e[18]=u(" Approve ",-1))],64))],8,Le),t("button",{onClick:p=>L(s.name,"Reject"),disabled:!!n.value,class:"flex-1 md:flex-none flex items-center justify-center gap-2 px-4 py-2 bg-red-500/10 text-red-400 border border-red-500/20 rounded-lg hover:bg-red-500/20 transition-colors disabled:opacity-50"},[c(m(N),{size:16}),e[19]||(e[19]=u(" Reject ",-1))],8,De)])])]))),128))]))])):h("",!0)]))}});export{Me as default};
