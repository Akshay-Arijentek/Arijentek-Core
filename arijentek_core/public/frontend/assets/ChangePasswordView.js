var z=(_,p,o)=>new Promise((f,c)=>{var r=s=>{try{i(o.next(s))}catch(d){c(d)}},v=s=>{try{i(o.throw(s))}catch(d){c(d)}},i=s=>s.done?f(s.value):Promise.resolve(s.value).then(r,v);i((o=o.apply(_,p)).next())});import{c as C,d as U,a as h,b as e,w as j,g as x,h as a,k as P,t as N,i as V,f as b,J as y,j as w,L as M,r as n,o as l}from"./main.js";import{b as q}from"./api.js";import{C as E}from"./circle-alert.js";import{C as L}from"./circle-check-big.js";/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g=C("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=C("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=C("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),D={class:"max-w-md mx-auto"},S={class:"glass-card p-6 animate-slide-up"},$={key:0,class:"p-3 bg-red-500/10 border border-red-500/20 text-red-400 rounded-lg text-sm flex items-center gap-2"},O={key:1,class:"p-3 bg-green-500/10 border border-green-500/20 text-green-400 rounded-lg text-sm flex items-center gap-2"},F={class:"relative group"},I=["type"],J={class:"relative group"},K=["type"],T={class:"relative group"},G=["type"],H=["disabled"],Q={key:0,class:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"},R={key:1},te=U({__name:"ChangePasswordView",setup(_){const p=n(""),o=n(""),f=n(""),c=n(!1),r=n(""),v=n(""),i=n(!1),s=n(!1),d=n(!1);function B(){return z(this,null,function*(){if(r.value="",v.value="",o.value!==f.value){r.value="New passwords don't match";return}if(o.value.length<8){r.value="Password must be at least 8 characters long";return}c.value=!0;try{const m=yield q.changePassword(p.value,o.value);m.success?(v.value="Password changed successfully",p.value="",o.value="",f.value=""):r.value=m.error||"Failed to change password"}catch(m){r.value=m.message||"An error occurred"}finally{c.value=!1}})}return(m,t)=>(l(),h("div",D,[t[9]||(t[9]=e("div",{class:"mb-8 animate-fade-in text-center"},[e("h1",{class:"text-2xl sm:text-3xl font-bold text-white"},"Security"),e("p",{class:"text-sm text-slate-500 mt-1"},"Update your password")],-1)),e("div",S,[e("form",{onSubmit:j(B,["prevent"]),class:"space-y-4"},[r.value?(l(),h("div",$,[x(a(E),{size:16}),P(" "+N(r.value),1)])):V("",!0),v.value?(l(),h("div",O,[x(a(L),{size:16}),P(" "+N(v.value),1)])):V("",!0),e("div",null,[t[6]||(t[6]=e("label",{class:"block text-xs font-medium text-slate-400 mb-1.5 uppercase tracking-wider"},"Current Password",-1)),e("div",F,[b(e("input",{"onUpdate:modelValue":t[0]||(t[0]=u=>p.value=u),type:i.value?"text":"password",required:"",class:"w-full bg-slate-900/50 border border-white/10 rounded-lg px-4 py-2.5 pl-10 pr-16 text-white focus:outline-none focus:ring-2 focus:ring-teal-500/50 transition-all placeholder:text-slate-600",placeholder:"Enter current password"},null,8,I),[[y,p.value]]),x(a(A),{size:18,class:"absolute left-3 top-2.5 text-slate-500 group-focus-within:text-teal-400 transition-colors"}),e("button",{type:"button",onClick:t[1]||(t[1]=u=>i.value=!i.value),class:"absolute right-12 top-2.5 text-slate-500 hover:text-white transition-colors focus:outline-none"},[i.value?(l(),w(a(g),{key:0,size:18})):(l(),w(a(k),{key:1,size:18}))])])]),e("div",null,[t[7]||(t[7]=e("label",{class:"block text-xs font-medium text-slate-400 mb-1.5 uppercase tracking-wider"},"New Password",-1)),e("div",J,[b(e("input",{"onUpdate:modelValue":t[2]||(t[2]=u=>o.value=u),type:s.value?"text":"password",required:"",class:"w-full bg-slate-900/50 border border-white/10 rounded-lg px-4 py-2.5 pl-10 pr-16 text-white focus:outline-none focus:ring-2 focus:ring-teal-500/50 transition-all placeholder:text-slate-600",placeholder:"Min 8 chars, uppercase, digit, special"},null,8,K),[[y,o.value]]),x(a(M),{size:18,class:"absolute left-3 top-2.5 text-slate-500 group-focus-within:text-teal-400 transition-colors"}),e("button",{type:"button",onClick:t[3]||(t[3]=u=>s.value=!s.value),class:"absolute right-12 top-2.5 text-slate-500 hover:text-white transition-colors focus:outline-none"},[s.value?(l(),w(a(g),{key:0,size:18})):(l(),w(a(k),{key:1,size:18}))])])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-xs font-medium text-slate-400 mb-1.5 uppercase tracking-wider"},"Confirm New Password",-1)),e("div",T,[b(e("input",{"onUpdate:modelValue":t[4]||(t[4]=u=>f.value=u),type:d.value?"text":"password",required:"",class:"w-full bg-slate-900/50 border border-white/10 rounded-lg px-4 py-2.5 pl-10 pr-16 text-white focus:outline-none focus:ring-2 focus:ring-teal-500/50 transition-all placeholder:text-slate-600",placeholder:"Confirm new password"},null,8,G),[[y,f.value]]),x(a(M),{size:18,class:"absolute left-3 top-2.5 text-slate-500 group-focus-within:text-teal-400 transition-colors"}),e("button",{type:"button",onClick:t[5]||(t[5]=u=>d.value=!d.value),class:"absolute right-12 top-2.5 text-slate-500 hover:text-white transition-colors focus:outline-none"},[d.value?(l(),w(a(g),{key:0,size:18})):(l(),w(a(k),{key:1,size:18}))])])]),e("button",{type:"submit",disabled:c.value,class:"w-full mt-6 bg-gradient-to-r from-teal-500 to-emerald-500 hover:from-teal-400 hover:to-emerald-400 text-white font-medium py-2.5 rounded-lg shadow-lg shadow-teal-500/20 transition-all active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed"},[c.value?(l(),h("span",Q)):(l(),h("span",R,"Update Password"))],8,H)],32)])]))}});export{te as default};
