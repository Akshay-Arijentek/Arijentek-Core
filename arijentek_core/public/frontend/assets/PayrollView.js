var b=(_,f,i)=>new Promise((s,u)=>{var y=n=>{try{o(i.next(n))}catch(p){u(p)}},v=n=>{try{o(i.throw(n))}catch(p){u(p)}},o=n=>n.done?s(n.value):Promise.resolve(n.value).then(y,v);o((i=i.apply(_,f)).next())});import{p as w}from"./api.js";import{c as h,d as D,u as N,m as M,a as d,b as t,g as m,h as x,t as l,W as j,i as z,F as S,y as V,r as k,x as g,o as c,k as C}from"./main.js";import{C as F}from"./calendar.js";/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=h("banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=h("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=h("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-vue-next v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=h("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),H={key:0,class:"flex items-center justify-center py-20"},I={key:1,class:"space-y-6 animate-slide-up"},P={key:0,class:"grid grid-cols-1 sm:grid-cols-3 gap-4"},U={class:"glass-card-hover p-5"},G={class:"flex items-center justify-between mb-3"},Y={class:"w-9 h-9 rounded-xl bg-emerald-500/10 text-emerald-400 flex items-center justify-center"},W={class:"text-2xl font-bold text-emerald-400"},E={class:"glass-card-hover p-5"},R={class:"flex items-center justify-between mb-3"},$={class:"w-9 h-9 rounded-xl bg-blue-500/10 text-blue-400 flex items-center justify-center"},q={class:"text-2xl font-bold text-blue-400"},J={class:"text-xs text-slate-500 mt-1"},K={class:"glass-card-hover p-5"},O={class:"flex items-center justify-between mb-3"},Q={class:"w-9 h-9 rounded-xl bg-teal-500/10 text-teal-400 flex items-center justify-center"},X={class:"text-2xl font-bold text-teal-400"},Z={key:0,class:"space-y-3"},tt={class:"flex items-center gap-4"},et={class:"w-12 h-12 rounded-xl bg-accent/10 text-accent flex items-center justify-center shrink-0"},st={class:"text-base font-semibold text-white"},at={class:"text-xs text-slate-500"},lt={class:"flex items-center gap-6 sm:gap-8"},ot={class:"text-sm font-semibold text-slate-300"},nt={class:"text-sm font-bold text-emerald-400"},it=["onClick"],rt={key:1,class:"glass-card p-12 text-center"},pt=D({__name:"PayrollView",setup(_){const f=N(),i=k(!0),s=k([]),u=g(()=>s.value.reduce((a,e)=>a+(e.net_pay||0),0)),y=g(()=>s.value.reduce((a,e)=>a+(e.gross_pay||0),0)),v=g(()=>s.value.length?Math.round(u.value/s.value.length):0);function o(a){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(a)}function n(a){f.csrfToken||window.csrf_token;const e=w.getDownloadUrl(a);window.open(e,"_blank")}function p(){return b(this,null,function*(){i.value=!0;try{const a=yield w.getSlips();s.value=a||[]}catch(a){s.value=[]}finally{i.value=!1}})}return M(p),(a,e)=>(c(),d("div",null,[e[12]||(e[12]=t("div",{class:"mb-8 animate-fade-in"},[t("h1",{class:"text-2xl sm:text-3xl font-bold text-white"},"Payroll"),t("p",{class:"text-sm text-slate-500 mt-1"},"View and download your salary slips")],-1)),i.value?(c(),d("div",H,[...e[0]||(e[0]=[t("div",{class:"w-10 h-10 border-2 border-accent/30 border-t-accent rounded-full animate-spin"},null,-1)])])):(c(),d("div",I,[s.value.length?(c(),d("div",P,[t("div",U,[t("div",G,[e[1]||(e[1]=t("span",{class:"text-sm font-medium text-slate-400"},"Avg Net Pay",-1)),t("div",Y,[m(x(B),{size:18,"stroke-width":1.8})])]),t("p",W,l(o(v.value)),1),e[2]||(e[2]=t("p",{class:"text-xs text-slate-500 mt-1"},"per month",-1))]),t("div",E,[t("div",R,[e[3]||(e[3]=t("span",{class:"text-sm font-medium text-slate-400"},"YTD Gross",-1)),t("div",$,[m(x(T),{size:18,"stroke-width":1.8})])]),t("p",q,l(o(y.value)),1),t("p",J,l(s.value.length)+" slip"+l(s.value.length!==1?"s":""),1)]),t("div",K,[t("div",O,[e[4]||(e[4]=t("span",{class:"text-sm font-medium text-slate-400"},"YTD Net",-1)),t("div",Q,[m(x(j),{size:18,"stroke-width":1.8})])]),t("p",X,l(o(u.value)),1),e[5]||(e[5]=t("p",{class:"text-xs text-slate-500 mt-1"},"total credited",-1))])])):z("",!0),t("div",null,[e[11]||(e[11]=t("h3",{class:"text-sm font-semibold text-slate-400 uppercase tracking-wider mb-4"},"Salary Slips",-1)),s.value.length?(c(),d("div",Z,[(c(!0),d(S,null,V(s.value,r=>(c(),d("div",{key:r.name,class:"glass-card-hover p-5 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},[t("div",tt,[t("div",et,[m(x(F),{size:20,"stroke-width":1.8})]),t("div",null,[t("p",st,l(r.month)+" "+l(r.year),1),t("p",at,l(new Date(r.start_date).toLocaleDateString("en-US",{month:"short",day:"numeric"}))+" â€” "+l(new Date(r.end_date).toLocaleDateString("en-US",{month:"short",day:"numeric"})),1)])]),t("div",lt,[t("div",null,[e[6]||(e[6]=t("p",{class:"text-xs text-slate-500"},"Gross",-1)),t("p",ot,l(o(r.gross_pay)),1)]),t("div",null,[e[7]||(e[7]=t("p",{class:"text-xs text-slate-500"},"Net Pay",-1)),t("p",nt,l(o(r.net_pay)),1)])]),t("button",{onClick:dt=>n(r.name),class:"flex items-center gap-2 px-4 py-2.5 rounded-xl bg-white/[0.04] hover:bg-white/[0.08] border border-white/[0.06] text-sm font-medium text-slate-300 hover:text-white transition-all self-start sm:self-center shrink-0"},[m(x(L),{size:16,"stroke-width":1.8}),e[8]||(e[8]=C(" Download ",-1))],8,it)]))),128))])):(c(),d("div",rt,[m(x(A),{size:40,class:"mx-auto text-slate-600 mb-3"}),e[9]||(e[9]=t("p",{class:"text-slate-400 font-medium"},"No salary slips found",-1)),e[10]||(e[10]=t("p",{class:"text-sm text-slate-500 mt-1"},"Your payslips will appear here once processed",-1))]))])]))]))}});export{pt as default};
